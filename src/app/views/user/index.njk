{% extends 'layout.njk' %}

{% block content %}
<section class="user-dashboard container form">
    <form action="/users?_method=PUT" method="POST">
        <div class="header">
            <h3>Detalhes</h3>
        </div>
        <div class="fields">
            {%include 'user/fields.njk'%}
        </div>
        <input type="hidden" name="id" value={{user.id}}>
        <button type="submit" class="button edit">Atualizar</button>
    </form>
    <form action="/users?_method=DELETE" method="POST" id="form-delete">
        <input type="hidden" name="id" value={{user.id}}>
        <button type="submit" class="button delete">Deletar</button>
    </form>
</section>
<script>
    const formDelete = document.querySelector("#form-delete")
    formDelete.addEventListener("submit", (event)=>{
        const confirmation = confirm("Tem certeza que deseja excluir sua conta? Não poderá ser desfeito posteriormente.")
        if(!confirmation){
            event.preventDefault()
        }
    })
</script>
{% endblock content %} 